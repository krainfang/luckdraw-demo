-- 奖品位置表
CREATE TABLE `WDZJ_PRIZE_CATEGORIES` (
  `PC_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `PC_NAME` varchar(255) COLLATE utf8_bin NOT NULL,
  `PC_START_TIME` datetime DEFAULT NULL,
  `PC_END_TIME` datetime DEFAULT NULL,
  `PC_IMG_URL` varchar(1024) COLLATE utf8_bin NOT NULL,
  `PC_STATUS` tinyint(4) NOT NULL DEFAULT '1',
  `PC_SORT` int(11) DEFAULT NULL,
  `PA_ID` bigint(20) NOT NULL DEFAULT '0',
  `PC_EXTEND` varchar(1000) COLLATE utf8_bin DEFAULT NULL COMMENT '奖品扩展字段的json',
  `UPDATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`PC_ID`),
  KEY `IDX_WDZJ_PRIZE_CATEGORIES_PA_ID_PC_STATUS` (`PA_ID`,`PC_STATUS`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;


-- 奖品表
CREATE TABLE `WDZJ_PRIZE_LIST` (
  `PL_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `PC_ID` bigint(20) NOT NULL,
  `PL_NAME` varchar(64) COLLATE utf8_bin NOT NULL,
  `PL_DETAIL` varchar(400) COLLATE utf8_bin DEFAULT NULL COMMENT '奖品描述',
  `PL_TYPE` int(1) DEFAULT NULL COMMENT '0 实物，1金币，2虚拟，3T码，4现金，5谢谢参与，6卡牌, 7红包',
  `PL_NUM` int(11) NOT NULL DEFAULT '0',
  `PL_PUT_NUM` int(11) NOT NULL DEFAULT '0',
  `MAX_PL_TIME` int(11) DEFAULT NULL,
  `PL_PROBABILITY` double(11,2) NOT NULL,
  `PL_HUI_PROBABILITY` double(11,2) DEFAULT NULL,
  `AS_ID` int(11) DEFAULT NULL COMMENT '平台ID',
  `PL_VALID_START_TIME` datetime DEFAULT NULL,
  `PL_VALID_END_TIME` datetime DEFAULT NULL,
  `PL_STATUS` tinyint(4) NOT NULL DEFAULT '1',
  `PL_CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `PA_ID` bigint(20) NOT NULL,
  `ADMIN_USER_ID` int(11) DEFAULT NULL,
  `ADMIN_USER_NAME` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `IMPORT_CODE` text COLLATE utf8_bin,
  `GOLD_NUM` int(11) DEFAULT NULL,
  `PL_OVER_NUM` int(11) DEFAULT NULL,
  `PC_IMG_URL` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `IS_DEFAULT` int(1) NOT NULL DEFAULT '0',
  `PL_BUY_PROBABILITY` double(11,2) DEFAULT NULL COMMENT '购买概率',
  `PL_EXTEND` varchar(1000) COLLATE utf8_bin DEFAULT NULL COMMENT '奖品扩展字段的json',
  `COUPON_CODE` varchar(255) COLLATE utf8_bin DEFAULT '',
  PRIMARY KEY (`PL_ID`),
  KEY `INDEX_PC_ID` (`PC_ID`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- 中奖纪录
CREATE TABLE `WDZJ_WINNERS_LIST` (
  `WL_ID` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '中奖纪录主键ID',
  `USER_ID` int(11) DEFAULT NULL,
  `USER_NAME` varchar(64) COLLATE utf8_bin DEFAULT NULL,
  `USER_MOBILE` varchar(11) COLLATE utf8_bin DEFAULT NULL,
  `IP_ADDRESS` varchar(128) COLLATE utf8_bin DEFAULT NULL COMMENT 'IP',
  `PL_ID` bigint(20) NOT NULL COMMENT '奖品ID',
  `VERIFICATION_CODE` varchar(128) COLLATE utf8_bin DEFAULT NULL,
  `WL_TIME` datetime NOT NULL COMMENT '获奖时间',
  `WL_DATE` date NOT NULL COMMENT '获奖日期',
  `WL_IS_REAL` tinyint(4) NOT NULL DEFAULT '1' COMMENT '是否假数据（0假数据，1真）',
  `PA_ID` bigint(20) NOT NULL DEFAULT '0' COMMENT '活动ID，取WDZJ_PRIZE_ACTIVITY表主键ID',
  `WL_IS_ACTIVE` tinyint(4) DEFAULT '0' COMMENT '收益券的激活状态 0 未激活 1已激活',
  `WL_PLAT_PHONE` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT '平台收益券注册手机号',
  `ZHIFUBAO` varchar(64) COLLATE utf8_bin DEFAULT NULL COMMENT '支付宝（冗余）',
  `WL_FROM_ID` varchar(128) COLLATE utf8_bin DEFAULT NULL COMMENT '来源ID',
  `WL_IS_SAVE` tinyint(4) DEFAULT '1' COMMENT '是否领取 0 否 1是',
  `WL_IS_EXCHANGE` tinyint(4) NOT NULL DEFAULT '0' COMMENT '是否兑换奖品（0否，1是）',
  `WL_EXCHANGE_PRIZE_ID` int(11) NOT NULL DEFAULT '0' COMMENT '兑换奖品ID',
  `WL_ACTIVE_DATE` datetime DEFAULT NULL COMMENT '收益券的激活时间',
  PRIMARY KEY (`WL_ID`),
  KEY `INDEX_MOBILE_AND_DATE` (`USER_MOBILE`,`WL_DATE`) USING BTREE,
  KEY `INDEX_MOBILE` (`USER_MOBILE`) USING BTREE,
  KEY `FK_PL_ID` (`PL_ID`),
  KEY `idx_winners_list_userid_paid` (`USER_ID`,`PA_ID`),
  KEY `INDEX_USER_ID_KEY` (`USER_ID`),
  KEY `INDEX_PL_ID_USER_ID_KEY` (`USER_ID`,`PL_ID`,`WL_IS_EXCHANGE`) USING BTREE,
  KEY `id_date` (`PL_ID`,`WL_DATE`),
  KEY `PA_id_date` (`PA_ID`,`WL_DATE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- 位置数据
INSERT INTO `WDZJ_PRIZE_CATEGORIES` (`PC_ID`, `PC_NAME`, `PC_START_TIME`, `PC_END_TIME`, `PC_IMG_URL`, `PC_STATUS`, `PC_SORT`, `PA_ID`, `PC_EXTEND`, `UPDATE_TIME`)
VALUES
(26, X'E7BD91', '2017-09-07 19:19:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634333431735F2E706E67', 1, 1, 5, X'', '2018-05-24 01:41:02'),
(27, X'E8B4B7', '2017-09-07 19:19:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634343232735F2E706E67', 1, 2, 5, X'', '2018-05-24 01:41:06'),
(28, X'E4B98B', '2017-09-08 18:15:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634343431735F2E706E67', 1, 3, 5, X'', '2018-05-24 01:41:07'),
(29, X'E5AEB6', '2017-09-08 14:07:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634353031735F2E706E67', 1, 4, 5, X'', '2018-05-24 01:41:10'),
(30, X'E585AD', '2017-09-10 16:27:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634353137735F2E706E67', 1, 5, 5, X'', '2018-05-24 01:41:11'),
(31, X'E591A8', '2017-09-10 16:28:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634353336735F2E706E67', 1, 6, 5, X'', '2018-05-24 01:41:12'),
(32, X'E5B9B4', '2017-09-10 16:29:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634363032735F2E706E67', 1, 7, 5, X'', '2018-05-24 01:41:13'),
(33, X'E5BA86', '2017-09-10 16:30:00', '2030-11-01 19:19:00', X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F63617465676F72792F3230313730393130313634363231735F2E706E67', 1, 8, 5, X'', '2018-05-24 01:41:14');

-- 奖品表
INSERT INTO `WDZJ_PRIZE_LIST` (`PL_ID`, `PC_ID`, `PL_NAME`, `PL_DETAIL`, `PL_TYPE`, `PL_NUM`, `PL_PUT_NUM`, `MAX_PL_TIME`, `PL_PROBABILITY`, `PL_HUI_PROBABILITY`, `AS_ID`, `PL_VALID_START_TIME`, `PL_VALID_END_TIME`, `PL_STATUS`, `PL_CREATE_TIME`, `PA_ID`, `ADMIN_USER_ID`, `ADMIN_USER_NAME`, `IMPORT_CODE`, `GOLD_NUM`, `PL_OVER_NUM`, `PC_IMG_URL`, `IS_DEFAULT`, `PL_BUY_PROBABILITY`, `PL_EXTEND`, `COUPON_CODE`)
VALUES
(151, 26, X'E7BD91', X'', 6, 10000000, 100000000, 1, 1.00, 1.00, 138, '2017-09-07 19:20:00', '2030-11-01 19:20:00', 1, '2017-09-07 19:21:02', 5, 13, X'61646D696E', NULL, NULL, NULL, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313634313034735F2E706E67', 1, 1.00, X'', X''),
(152, 27, X'E8B4B7', X'E8B4B7', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 139, '2017-09-07 19:21:00', '2030-11-01 19:20:00', 1, '2017-09-07 19:21:53', 5, 13, X'61646D696E', NULL, NULL, 999729358, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313634313233735F2E706E67', 0, 1.00, X'', X''),
(153, 28, X'E4B98B', X'', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 138, '2017-09-09 14:10:00', '2030-11-01 19:20:00', 1, '2017-09-09 14:10:25', 5, 13, X'61646D696E', NULL, NULL, 999729634, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313634313438735F2E706E67', 0, 1.00, X'', X''),
(154, 29, X'E5AEB6', X'', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 138, '2017-09-10 16:34:00', '2030-11-01 19:20:00', 1, '2017-09-10 16:35:29', 5, 13, X'61646D696E', NULL, NULL, 999729347, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313633353233735F2E706E67', 0, 1.00, X'', X''),
(155, 30, X'E585AD', X'31', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 138, '2017-09-10 16:36:00', '2030-11-01 19:20:00', 1, '2017-09-10 16:37:07', 5, 13, X'61646D696E', NULL, NULL, 999729351, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313633373034735F2E706E67', 0, 1.00, X'', X''),
(156, 31, X'E591A8', X'E591A8', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 138, '2017-09-10 16:37:00', '2030-11-01 19:20:00', 1, '2017-09-10 16:38:24', 5, 13, X'61646D696E', NULL, NULL, 999729229, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313633383231735F2E706E67', 0, 1.00, X'', X''),
(157, 32, X'E5B9B4', X'E5B9B4', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 138, '2017-09-10 16:39:00', '2030-11-01 19:20:00', 1, '2017-09-10 16:39:29', 5, 13, X'61646D696E', NULL, NULL, 999729176, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313633393236735F2E706E67', 0, 1.00, X'', X''),
(158, 33, X'E5BA86', X'E5BA86', 6, 1000000000, 1000000000, 1000000000, 1.00, 1.00, 138, '2017-09-10 16:39:00', '2030-11-01 19:20:00', 1, '2017-09-10 16:40:21', 5, 13, X'61646D696E', NULL, NULL, 999727692, X'687474703A2F2F7777772E77647A6A2E636F6D2F636C75622F75706C6F61642F7072697A652F3230313730393130313634303139735F2E706E67', 0, 1.00, X'', X'');

